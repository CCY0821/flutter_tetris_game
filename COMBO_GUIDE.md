# 🔥 連擊系統 (Combo System) - 完整指南

## 📖 基於官方規範實現

本連擊系統完全基於 [Tetris.wiki/Combo](https://tetris.wiki/Combo) 的官方規範實現，遵循現代俄羅斯方塊指導原則。

## 🎯 連擊機制

### 🔢 計數規則
- **起始值**：Combo 計數器從 `-1` 開始（官方標準）
- **增加條件**：每次消除至少一行時 +1
- **中斷條件**：方塊落下但未消除任何行時，計數器重置為 `-1`
- **顯示邏輯**：UI 顯示 `max(0, combo_count)`，即不顯示負值

### 💰 得分計算
```
連擊獎勵 = 50 × 當前Combo數 × 當前等級
```

**範例**：
- 等級 1，連擊 3：50 × 3 × 1 = 150 分
- 等級 5，連擊 7：50 × 7 × 5 = 1,750 分

## 🎨 視覺系統

### 🌈 連擊等級與顏色
| Combo 數 | 等級 | 顏色 | 描述 |
|----------|------|------|------|
| 1-3 | Nice | 藍色 🔵 | 入門級連擊 |
| 4-6 | Great | 綠色 🟢 | 良好連擊 |
| 7-10 | Excellent | 黃色 🟡 | 優秀連擊 |
| 11-15 | Amazing | 橙色 🟠 | 驚人連擊 |
| 16-20 | Incredible | 橙紅色 🔴 | 不可思議連擊 |
| 21+ | LEGENDARY | 深紅色 🔴 | 傳奇級連擊 |

### 🎪 UI 元素

#### 1. 基本連擊指示器
- 位置：右側面板上方
- 顯示：`COMBO X` + 等級描述
- 顏色：隨連擊等級動態變化

#### 2. 高級連擊特效（4+ Combo）
- 漸變背景色彩
- 發光邊框效果
- 陰影擴散動畫
- 大尺寸突出顯示

#### 3. 連擊統計面板
- 當前連擊數
- 最大連擊記錄 🏆
- 總連擊次數
- 連擊積分統計
- 成就等級條

## 🎵 音效系統

### 🔊 分層音效優先級
1. **T-Spin 音效**：最高優先級
2. **高連擊音效**（4+ Combo）：`combo_high`
3. **一般連擊音效**（1-3 Combo）：`combo`
4. **Tetris 音效**（四行消除）
5. **一般消行音效**

### 🎶 音效觸發條件
- **連擊 1-3**：播放 `combo` 音效
- **連擊 4+**：播放 `combo_high` 音效
- **連擊中斷**：無特殊音效，回到一般消行

## 📊 統計追蹤

### 📈 記錄項目
- **即時統計**：當前連擊數
- **歷史記錄**：最大連擊數
- **次數統計**：總連擊發生次數
- **積分統計**：連擊獲得的總分數

### 🎖️ 成就系統
- **連擊等級**：6 個不同等級
- **視覺指示**：已達成等級顯示彩色圓點
- **進度追蹤**：顯示達成條件範圍

## 🎮 遊戲策略

### 🧠 基本策略
1. **保留空間**：至少保持兩列開放
2. **限制 I 方塊**：避免過早使用 I 方塊
3. **連續消除**：優先製造單行/雙行消除
4. **避免中斷**：小心不要讓方塊無效落地

### 🏆 高級技巧
1. **TSD Setup**：結合 T-Spin Double 維持連擊
2. **LST Stack**：使用 LST 堆疊模式
3. **DT Cannon**：高級連擊開局設置
4. **4-Line PCO**：完美消行連擊

## 🧪 測試指南

### ✅ 基本測試
1. **連擊啟動**：連續消除 2-3 行，確認 Combo 顯示
2. **連擊中斷**：讓方塊落地但不消行，確認重置
3. **得分驗證**：檢查得分計算是否正確
4. **UI 更新**：確認視覺元素即時更新

### 🔬 進階測試
1. **長連擊**：嘗試達到 10+ 連擊
2. **等級變化**：測試不同等級的得分倍數
3. **音效觸發**：驗證不同連擊的音效
4. **統計準確性**：檢查統計面板數據

## 🎯 實戰範例

### 📝 連擊場景 1：基礎連擊
```
操作序列：
1. 放置方塊 → 消除 1 行 → Combo 1 (50分 × 等級)
2. 放置方塊 → 消除 1 行 → Combo 2 (100分 × 等級)
3. 放置方塊 → 消除 2 行 → Combo 3 (150分 × 等級)
4. 放置方塊 → 無消行 → 連擊中斷，重置為 0
```

### 📝 連擊場景 2：高級連擊
```
連擊 7（Excellent）示例：
- 視覺：黃色漸變特效框
- 音效：combo_high
- 得分：50 × 7 × 當前等級
- 成就：解鎖 "Excellent Combo!" 等級
```

## 🛠️ 開發技術細節

### 🔧 核心類別
- `ScoringService`：連擊邏輯和計分
- `ComboStatsPanel`：統計面板 Widget
- `GameUIComponents`：UI 元素集合

### 📱 UI 組件
- `gameStatusIndicators()`：基本連擊指示
- `comboEffectIndicator()`：高級連擊特效
- `comboStatsPanel()`：詳細統計面板

---

🎯 **目標**：為玩家提供符合官方標準的專業級連擊體驗

🚀 **特色**：完整的視覺回饋、音效系統和統計追蹤

💡 **建議**：熟練掌握連擊系統可大幅提升遊戲分數和競技水平！